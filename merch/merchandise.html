<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="logo.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABECON2025 | Shop Merch</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.js"></script>


    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-[url('/images/background.jpg')] bg-cover bg-no-repeat font-sans">

    <!-- Navbar -->
    <header class="fixed top-0 w-full z-50 bg-white border-b border-gray-200">
        <nav class="max-w-6xl mx-auto flex justify-between items-center p-4">
            <div class="actions" style="display: none;">
                <span id="hamburger-btn" class="material-symbols-outlined">menu</span>
            </div>
            <!-- Left: Logo -->
            <a href="#" class="flex items-center">
                <img src="merchlogo.png" alt="Logo" class="h-12">
            </a>

            <!-- Middle: Links -->
            <div class="hidden md:flex space-x-8 font-semibold text-lg">
                <a href="">Home</a>
                <a href="">About</a>
                <a href="">Events</a>
                <a href="">Schedule</a>
                <a href="" class="font-bold">Merch</a>
            </div>

            <!-- Right: Actions -->
            <div class="flex items-center space-x-4">
                <button id="openCart" class="relative">
                    <span class="material-symbols-outlined">shopping_cart</span>
                    <span id="cart-count"
                        class="absolute -top-2 -right-2 bg-black text-white text-xs px-2 rounded-full">0</span>
                </button>
                <span class="material-symbols-outlined">account_circle</span>
            </div>
        </nav>
    </header>

    <main class="pt-20">
        <!-- Hero Banner -->
        <section class="relative">
            <img src="herobanner.jpg" alt="Merch Banner" class="w-full object-cover">
            <!-- <div class="absolute inset-0 bg-gradient-to-b from-transparent to-white"></div> -->
        </section>

        <!-- Cart Drawer -->
        <div id="overlay" class="fixed inset-0 bg-black/50 opacity-0 pointer-events-none transition duration-500 z-40">
        </div>

        <div id="cartDrawer"
            class="fixed top-0 right-0 w-96 h-full bg-white shadow-lg transform translate-x-full opacity-0 transition duration-500 z-50 flex flex-col">

            <!-- Header -->
            <div class="flex items-center gap-2 p-4 border-b">
                <button id="closeCart" class="text-gray-600">
                    <span class="material-symbols-outlined">arrow_back_ios</span>
                </button>
                <h2 class="font-semibold text-lg">Cart</h2>
            </div>

            <!-- Empty State -->
            <div class="flex-1 flex items-center justify-center text-gray-400 text-sm hidden">
                <p>You have no items in your cart.</p>
            </div>

            <!-- Cart Items -->
            <div class="flex-1 overflow-y-auto p-4 space-y-4">
                <!-- Example Cart Item -->
                <div class="flex items-center gap-3">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small"
                        class="w-14 h-14 object-cover rounded border">
                    <div class="flex-1">
                        <p class="font-medium">White Shirt Small</p>
                        <p class="font-semibold text-sm">₱190.00</p>
                        <div class="flex items-center gap-2">
                            <button class="w-6 h-6 border rounded">-</button>
                            <span>1</span>
                            <button class="w-6 h-6 border rounded">+</button>
                        </div>
                    </div>
                    <button class="text-gray-400 hover:text-gray-600">×</button>
                </div>
            </div>
            <!-- Footer -->
            <div class="p-4 border-t">
                <div class="flex justify-between font-semibold mb-2">
                    <span>Total</span>
                    <span id="cart-total">₱0.00</span>
                </div>
                <button id="checkoutBtn" class="w-full bg-green-700 hover:bg-green-800 text-white font-semibold py-2 rounded-lg">Checkout</button>
            </div>

        </div>


        <!-- Convention Kit Section -->
        <section class="max-w-6xl mx-auto py-12 text-center">
            <div class="mb-12">
                <h1 class="text-2xl font-bold">Convention Kit Inclusions</h1>
                <p class="">All items listed is free upon registration</p>
            </div>
            <div class="grid gap-6 grid-cols-1 mt-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
                <!-- Product Card -->
                <div
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">White Shirt</h3>
                </div>
                <!-- Product Card -->
                <div
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Field Cap</h3>
                </div>

                <div
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Acrylic Button Pins</h3>
                </div>

                <div
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Canvas / Nylon Messenger Bag</h3>
                </div>

                <div
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">
                    <img src="/images/product-images/image 5.png" alt="White Shirt Small" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Lanyard</h3>
                </div>

            </div>

        </section>

        <!-- Merch Section -->
        <section class="max-w-6xl mx-auto py-12 text-center">
            <h1 class="text-2xl font-bold mb-12">Shop Our Exclusive Merch</h1>

            <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">
                <!-- Product Card -->
                <!-- Product Card 1 -->
                <div data-modal-target="product-modal" data-modal-toggle="product-modal" data-title="Jersey Sublimation"
                    data-price="₱249.00" data-qty="40" data-img="/images/product-images/image 5.png"
                    data-desc="High-quality jersey sublimation design, breathable and durable."
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">

                    <img src="/images/product-images/image 5.png" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Jersey Sublimation</h3>
                    <div class="flex justify-between text-sm text-gray-600 mb-4">
                        <span class="font-bold text-black">₱249.00</span>
                        <span>Qty: 40</span>
                    </div>
                    <button
                        class="flex items-center justify-center gap-1 border px-3 py-2 rounded-md hover:bg-gray-100">
                        <span class="material-symbols-outlined text-sm">add_shopping_cart</span>
                        Add to cart
                    </button>
                </div>

                <!-- Product Card 2 -->
                <div data-modal-target="product-modal" data-modal-toggle="product-modal"
                    data-title="Acrylic Button Pins" data-price="₱189.00" data-qty="13"
                    data-img="/images/product-images/image 5.png"
                    data-desc="Custom acrylic button pins perfect for events and giveaways."
                    class="bg-white border rounded-xl p-4 flex flex-col justify-between shadow-sm cursor-pointer hover:shadow-md transition">

                    <img src="/images/product-images/image 5.png" class="rounded-md mb-3">
                    <h3 class="font-semibold text-base mb-1 text-left">Acrylic Button Pins</h3>
                    <div class="flex justify-between text-sm text-gray-600 mb-4">
                        <span class="font-bold text-black">₱189.00</span>
                        <span>Qty: 13</span>
                    </div>
                    <button
                        class="flex items-center justify-center gap-1 border px-3 py-2 rounded-md hover:bg-gray-100">
                        <span class="material-symbols-outlined text-sm">add_shopping_cart</span>
                        Add to cart
                    </button>
                </div>

            </div>
        </section>
    </main>


    <!-- Cart Drawer JS -->
    <script>
        const cartDrawer = document.getElementById("cartDrawer");
        const overlay = document.getElementById("overlay");
        const openCart = document.getElementById("openCart");
        const closeCart = document.getElementById("closeCart");

        openCart.addEventListener("click", () => {
            cartDrawer.classList.add("translate-x-0", "opacity-100");
            overlay.classList.add("opacity-100", "pointer-events-auto");
            document.body.classList.add("overflow-hidden");
        });

        function closeCartDrawer() {
            cartDrawer.classList.remove("translate-x-0", "opacity-100");
            overlay.classList.remove("opacity-100", "pointer-events-auto");
            document.body.classList.remove("overflow-hidden");
        }

        closeCart.addEventListener("click", closeCartDrawer);
        overlay.addEventListener("click", closeCartDrawer);
    </script>

    <!-- Modal Product -->
    <div id="product-modal" data-modal-backdrop="static" tabindex="-1" aria-hidden="true"
        class="hidden fixed inset-0 z-50 flex items-center justify-center w-full p-4 overflow-x-hidden overflow-y-auto">

        <div class="relative w-full max-w-4xl">
            <div class="relative bg-white rounded-xl shadow-lg p-6 md:p-10">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">

                    <!-- Left: Images -->
                    <div class="flex flex-row space-x-4">
                        <img id="modal-thumb" src="" alt="Product Thumbnail"
                            class="w-32 h-40 object-cover rounded-lg border mx-auto md:mx-0">
                        <img id="modal-img" src="" alt="Product Image" class="w-full rounded-lg border shadow">
                    </div>

                    <!-- Right: Details -->
                    <div class="flex flex-col justify-between space-y-6">
                        <div>
                            <h2 id="modal-title" class="text-2xl font-bold mb-2"></h2>
                            <p id="modal-desc" class="text-gray-600 text-sm"></p>
                        </div>

                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span id="modal-price" class="text-2xl font-bold"></span>
                                <span id="modal-qty" class="text-gray-600 text-sm"></span>
                            </div>
                            <div class="flex items-center gap-4">
                                <!-- Quantity Selector -->
                                <div class="flex items-center border rounded-lg">
                                    <button id="qty-decrease"
                                        class="px-3 py-2 text-gray-600 hover:bg-gray-100">−</button>
                                    <span id="qty-value" class="px-4 py-2">1</span>
                                    <button id="qty-increase"
                                        class="px-3 py-2 text-gray-600 hover:bg-gray-100">+</button>
                                </div>

                                <!-- Add to Cart -->
                                <button id="add-to-cart" data-modal-hide="product-modal"
                                    class="flex-1 bg-black text-white font-semibold py-3 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-800">
                                    <span class="material-symbols-outlined">shopping_cart</span>
                                    Add to cart
                                </button>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- Close -->
                <button type="button" data-modal-hide="product-modal"
                    class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        const productCards = document.querySelectorAll('[data-modal-target="product-modal"]');
        let selectedQty = 1;
        let maxQty = document.getElementById("modal-qty").innerText;


        productCards.forEach(card => {
            card.addEventListener('click', () => {
                document.getElementById('modal-title').innerText = card.dataset.title;
                document.getElementById('modal-desc').innerText = card.dataset.desc;
                document.getElementById('modal-price').innerText = card.dataset.price;
                document.getElementById('modal-qty').innerText = "Qty: " + card.dataset.qty;
                document.getElementById('modal-thumb').src = card.dataset.img;
                document.getElementById('modal-img').src = card.dataset.img;
                maxQty = parseInt(card.dataset.qty, 10);
                selectedQty = 1;
                qtyValue.textContent = selectedQty;
            });
        });


        const qtyValue = document.getElementById("qty-value");
        const btnDecrease = document.getElementById("qty-decrease");
        const btnIncrease = document.getElementById("qty-increase");

        btnDecrease.addEventListener("click", () => {
            if (selectedQty > 1) {
                selectedQty--;
                qtyValue.textContent = selectedQty;
            }
        });

        btnIncrease.addEventListener("click", () => {
            if (selectedQty < maxQty) {
                selectedQty++;
                qtyValue.textContent = selectedQty;
            }
        });

        let cart = JSON.parse(localStorage.getItem("cart")) || [];

        // Update cart count on page load
        updateCartCount();

        document.getElementById("add-to-cart").addEventListener("click", () => {
            // Grab modal product info
            const title = document.getElementById("modal-title").innerText;
            const price = document.getElementById("modal-price").innerText;
            const img = document.getElementById("modal-img").src;

            // Check if already in cart
            const existing = cart.find(item => item.title === title);

            if (existing) {
                // prevent exceeding maxQty
                if (existing.qty + selectedQty > maxQty) {
                    alert(`You can only add up to ${maxQty} of this product.`);
                    return;
                }
                existing.qty += selectedQty;
            } else {
                if (selectedQty > maxQty) {
                    alert(`You can only add up to ${maxQty} of this product.`);
                    return;
                }
                cart.push({ title, price, img, qty: selectedQty, maxQty });
            }

            // Save cart
            localStorage.setItem("cart", JSON.stringify(cart));

            // Update UI
            updateCartCount();
            renderCartItems();
            updateCartTotal();


            // Reset qty in modal
            selectedQty = 1;
            qtyValue.textContent = 1;
        });

        function toggleCheckoutButton() {
    const checkoutBtn = document.getElementById("checkoutBtn");

    if (cart.length === 0) {
        checkoutBtn.disabled = true; // Disable the button
        checkoutBtn.classList.add('opacity-50', 'cursor-not-allowed');
    } else {
        checkoutBtn.disabled = false; // Enable the button
        checkoutBtn.classList.remove('opacity-50', 'cursor-not-allowed');
    }
}




        function updateCartTotal() {
            const total = cart.reduce((sum, item) => {
                // remove "₱" and commas before converting to number
                const price = parseFloat(item.price.replace(/[₱,]/g, ""));
                return sum + (price * item.qty);
            }, 0);

            document.getElementById("cart-total").textContent = "₱" + total.toFixed(2);
            toggleCheckoutButton();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.qty, 0);
            document.getElementById("cart-count").textContent = count;
            
        }

        function renderCartItems() {
            const cartContainer = document.querySelector("#cartDrawer .flex-1.overflow-y-auto");
            cartContainer.innerHTML = "";

            cart.forEach((item, index) => {
                const div = document.createElement("div");
                div.className = "flex items-center gap-3";

                div.innerHTML = `
      <img src="${item.img}" alt="${item.title}" class="w-14 h-14 object-cover rounded border">
      <div class="flex-1">
        <p class="font-medium">${item.title}</p>
        <p class="font-semibold text-sm">${item.price}</p>
        <div class="flex items-center gap-2">
        <button class="w-6 h-6 border rounded" 
            onclick="changeQty(${index}, -1)">-</button>
        <span>${item.qty}</span>
        <button class="w-6 h-6 border rounded" 
            onclick="changeQty(${index}, 1)" 
            ${item.qty >= item.maxQty ? 'disabled class="opacity-50 cursor-not-allowed"' : ''}>+</button>
        </div>
      </div>
      <button class="text-gray-400 hover:text-gray-600" onclick="removeItem(${index})">×</button>
    `;

                cartContainer.appendChild(div);
            });
            updateCartTotal();

        }

        function changeQty(index, delta) {
            const item = cart[index];
            const newQty = item.qty + delta;

            if (newQty > item.maxQty) {
                alert(`You can only add up to ${item.maxQty} of this product.`);
                return;
            }

            if (newQty <= 0) {
                cart.splice(index, 1);
            } else {
                item.qty = newQty;
            }

            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
            updateCartTotal();

        }


        function removeItem(index) {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartCount();
            renderCartItems();
            updateCartTotal();

        }

        // Render cart initially
        renderCartItems();

        document.getElementById("checkoutBtn").addEventListener("click", () => {
    // Save the cart to localStorage (already done in your code)
    localStorage.setItem("cart", JSON.stringify(cart));
    
    // Redirect to checkout.html
    window.location.href = "checkout.html";
});

    </script>


</body>

</html>